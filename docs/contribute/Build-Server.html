
<!DOCTYPE HTML>
<html lang="" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>Build and Demo Server Â· Scenarioo Documentation</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.2">
        
        
        
    
    <link rel="stylesheet" href="../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../gitbook/gitbook-plugin-search/search.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="Scenarioo-User-Documentation-and-Webpage-with-Jekyll.html" />
    
    
    <link rel="prev" href="Release-Scenarioo-Writer-Library.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="Type to search" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../">
            
                <a href="../">
            
                    
                    Introduction
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" data-path="../setup/downloads-and-links.html">
            
                <a href="../setup/downloads-and-links.html">
            
                    
                    Downloads and Links
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../setup/">
            
                <a href="../setup/">
            
                    
                    Setup & Usage
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.3.1" data-path="../setup/Scenarioo-Viewer-Web-Application-Setup.html">
            
                <a href="../setup/Scenarioo-Viewer-Web-Application-Setup.html">
            
                    
                    Install as Web App
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.2" data-path="../setup/Scenarioo-Viewer-Docker-Image.html">
            
                <a href="../setup/Scenarioo-Viewer-Docker-Image.html">
            
                    
                    Install as Docker Image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.3" data-path="../setup/Configuration.html">
            
                <a href="../setup/Configuration.html">
            
                    
                    Viewer Configuration
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.4" data-path="../setup/How-to-use-Scenarioo-Writer-Library.html">
            
                <a href="../setup/How-to-use-Scenarioo-Writer-Library.html">
            
                    
                    Write Content Using Writer Libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3.5" data-path="../setup/Publish-Documentation-Data.html">
            
                <a href="../setup/Publish-Documentation-Data.html">
            
                    
                    Publish Documentation Data
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../features/">
            
                <a href="../features/">
            
                    
                    Features & Concepts
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../features/Scenarioo-Writer-Documentation-Format.html">
            
                <a href="../features/Scenarioo-Writer-Documentation-Format.html">
            
                    
                    Documentation Format
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1.1" data-path="../features/Safe-Identifiers.html">
            
                <a href="../features/Safe-Identifiers.html">
            
                    
                    Safe Identifiers
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.2" data-path="../features/Labels.html">
            
                <a href="../features/Labels.html">
            
                    
                    Labels
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.3" data-path="../features/Details.html">
            
                <a href="../features/Details.html">
            
                    
                    Details & Object Repository
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.1.4" data-path="../features/validator-component/Scenarioo-Validator.html">
            
                <a href="../features/validator-component/Scenarioo-Validator.html">
            
                    
                    Scenarioo Format Validator
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../features/full-text-search/">
            
                <a href="../features/full-text-search/">
            
                    
                    Full Text Search
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.2.1" data-path="../features/full-text-search/setup.html">
            
                <a href="../features/full-text-search/setup.html">
            
                    
                    Full Text Search Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2.2" data-path="../features/full-text-search/specifications.html">
            
                <a href="../features/full-text-search/specifications.html">
            
                    
                    Full Text Search Specs
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../features/diff-viewer/">
            
                <a href="../features/diff-viewer/">
            
                    
                    Diff Viewer
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.3.1" data-path="../features/diff-viewer/user-guide.html">
            
                <a href="../features/diff-viewer/user-guide.html">
            
                    
                    Diff Viewer User Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3.2" data-path="../features/diff-viewer/setup.html">
            
                <a href="../features/diff-viewer/setup.html">
            
                    
                    Diff Viewer Setup Instructions
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="./">
            
                <a href="./">
            
                    
                    Contributor Guide
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="Development-Environment-with-IntelliJ.html">
            
                <a href="Development-Environment-with-IntelliJ.html">
            
                    
                    Development Environment Setup
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="Developer-Guide.html">
            
                <a href="Developer-Guide.html">
            
                    
                    Developer Guide
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="Code-of-Conduct.html">
            
                <a href="Code-of-Conduct.html">
            
                    
                    Code of Conduct: Rules & Guidelines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="Coding-guidelines.html">
            
                <a href="Coding-guidelines.html">
            
                    
                    Coding Guidelines
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="e2eTesting.html">
            
                <a href="e2eTesting.html">
            
                    
                    End to End Testing
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="Commit-rules.html">
            
                <a href="Commit-rules.html">
            
                    
                    Commit Rules
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="Branching-strategy.html">
            
                <a href="Branching-strategy.html">
            
                    
                    Branching Strategy
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="Versioning.html">
            
                <a href="Versioning.html">
            
                    
                    Versioning
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="Release-Scenarioo-Viewer-Web-Application.html">
            
                <a href="Release-Scenarioo-Viewer-Web-Application.html">
            
                    
                    Release Scenarioo Viewer Web Application
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.10" data-path="Building-the-Docker-Image.html">
            
                <a href="Building-the-Docker-Image.html">
            
                    
                    Release Docker Image
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.11" data-path="Release-Scenarioo-Writer-Library.html">
            
                <a href="Release-Scenarioo-Writer-Library.html">
            
                    
                    Release Scenarioo Writer Libraries
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.5.12" data-path="Build-Server.html">
            
                <a href="Build-Server.html">
            
                    
                    Build and Demo Server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.13" data-path="Scenarioo-User-Documentation-and-Webpage-with-Jekyll.html">
            
                <a href="Scenarioo-User-Documentation-and-Webpage-with-Jekyll.html">
            
                    
                    Webpage with Jekyll
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            Published with GitBook
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href=".." >Build and Demo Server</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="scenarioo-cicd-build-and-demo-server">Scenarioo CI/CD Build and Demo Server</h1>
<h2 id="jenkins">Jenkins</h2>
<p><a href="http://ci.scenarioo.org" target="_blank">http://ci.scenarioo.org</a> or <a href="http://build.scenarioo.org" target="_blank">http://build.scenarioo.org</a> (both forward to <a href="http://54.88.202.24/jenkins" target="_blank">http://54.88.202.24/jenkins</a>)</p>
<h2 id="demos">Demos</h2>
<p>Latest release: <a href="http://54.88.202.24/scenarioo-master" target="_blank">http://54.88.202.24/scenarioo-master</a> (or use shortcut <a href="http://demo.scenarioo.org" target="_blank">http://demo.scenarioo.org</a>)</p>
<p>Development for future release: <a href="http://54.88.202.24/scenarioo-develop" target="_blank">http://54.88.202.24/scenarioo-develop</a></p>
<h2 id="add-a-new-branch-to-be-built-and-deployed">Add a new branch to be built and deployed</h2>
<ul>
<li>Click &quot;New Item&quot; in the Jenkins menu</li>
<li>Set the name of the new build job to &quot;scenarioo-{my-branch-name}&quot;</li>
<li>Select &quot;Copy existing Item&quot; and enter &quot;scenarioo-develop&quot; or &quot;scenarioo-master&quot; (depending on from where you branched) as the base item.</li>
<li>Click &quot;Ok&quot;</li>
<li>Set the correct branch next to &quot;Branches to build&quot;</li>
<li>In the post-build task where the &quot;deploy-demo-and-run-e2e-tests&quot; task is called, set &quot;BRANCH={my-branch-name}&quot;.</li>
</ul>
<p>It&apos;s important that you use exactly the same {my-branch-name} values for both occurrences. It does not have to be the exact git branch name, but it should identify the branch. Only use alphanumeric characters and the dash in {my-branch-name}. Otherwise you may run into problems.</p>
<p>We use nginx as a reverse proxy. Therefore you also have to add a configuration for the new Scenarioo instance URL in <code>/etc/nginx/sites-available/default</code>. Otherwise the demo is not reachable.</p>
<h2 id="maintenance-of-the-build-server">Maintenance of the build server</h2>
<p>The server is maintained by adiherzog and forkch. Contact them if you need a Jenkins account.</p>
<h2 id="setup-of-build-server">Setup of build server</h2>
<p>There are a number of aliases defined in the .bash_aliases file of the ubuntu user. They all start with <code>sc-</code> and lead to the Tomcat, Jenkins and the Scenarioo data directories.</p>
<h2 id="demo-server">Demo Server</h2>
<p>Demo is available at <a href="http://54.88.202.24/scenarioo-{your-branch-name-here}" target="_blank">http://54.88.202.24/scenarioo-{your-branch-name-here}</a></p>
<h3 id="restart-tomcat-manually">Restart tomcat manually</h3>
<ol>
<li><p>SSH to the demo server:</p>
<blockquote>
<p>ssh -i .ssh/Scenarioo-Keypair.pem ubuntu@54.88.202.24<br>(you need the key for that! ask one of the Leads if you need it)</p>
</blockquote>
</li>
<li><p>Stop and start tomcat:</p>
<blockquote>
<p>sudo service tomcat7 stop<br>sudo service tomcat7 start  </p>
</blockquote>
</li>
</ol>
<h3 id="automatic-restart-of-tomcat">Automatic Restart of Tomcat</h3>
<p>Jenkins build &apos;smoketest&apos; checks every 5 minutes if the demo (on master and develop) is currently available.
(ATTENTION! this job is currently disabled and we should reactivate it and introduce an email on failure to lead devs)</p>
<p>Two cronjobs are defined:</p>
<ol>
<li><p>6 o clock in the morning: restart tomcat</p>
</li>
<li><p>every 15 minutes: restart tomcat if special jenkins job &apos;smoketest&apos; failed (REMARK: might be not optimal, because the smoketest might fail because of parallel running deployment?)</p>
</li>
</ol>
<p>Too see all defined cronjobs:</p>
<pre><code>&gt; sudo crontab -l

0 6 * * * service tomcat7 restart

*/15 * * * * /root/restart_tomcat_if_smoketest_failed
</code></pre><h2 id="setup-of-e2e-tests-on-build-server">Setup of e2e tests on build server</h2>
<p><img src="https://cloud.githubusercontent.com/assets/3780183/8078418/fe24f0b6-0f5d-11e5-87f2-1b738bc68d57.png" alt="End to End Tests Scenarioo Protractor"></p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="Release-Scenarioo-Writer-Library.html" class="navigation navigation-prev " aria-label="Previous page: Release Scenarioo Writer Libraries">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="Scenarioo-User-Documentation-and-Webpage-with-Jekyll.html" class="navigation navigation-next " aria-label="Next page: Webpage with Jekyll">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"title":"Build and Demo Server","level":"1.5.12","depth":2,"next":{"title":"Webpage with Jekyll","level":"1.5.13","depth":2,"path":"contribute/Scenarioo-User-Documentation-and-Webpage-with-Jekyll.md","ref":"contribute/Scenarioo-User-Documentation-and-Webpage-with-Jekyll.md","articles":[]},"previous":{"title":"Release Scenarioo Writer Libraries","level":"1.5.11","depth":2,"path":"contribute/Release-Scenarioo-Writer-Library.md","ref":"contribute/Release-Scenarioo-Writer-Library.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-fontsettings","edit-link","github","expandable-chapters","sitemap","puml","ga","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"github":{"url":"https://github.com/scenarioo/scenarioo/"},"puml":{},"livereload":{},"search":{},"lunr":{"maxIndexSize":1000000,"ignoreSpecialCharacters":false},"highlight":{},"sitemap":{"hostname":"http://scenarioo.org"},"ga":{"configuration":"auto","token":"UA-21795453-5"},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"edit-link":{"label":"Edit This Page","base":"https://github.com/scenarioo/scenarioo/edit/develop/docs"},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false},"expandable-chapters":{}},"theme":"default","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{"version":"3.0.0"},"title":"Scenarioo Documentation","gitbook":"3.2.2"},"file":{"path":"contribute/Build-Server.md","mtime":"2016-11-24T11:08:53.809Z","type":"markdown"},"gitbook":{"version":"3.2.2","time":"2016-12-16T10:40:21.580Z"},"basePath":"..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../gitbook/gitbook.js"></script>
    <script src="../gitbook/theme.js"></script>
    
        
        <script src="../gitbook/gitbook-plugin-edit-link/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-github/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-expandable-chapters/expandable-chapters.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-ga/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search-engine.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-search/search.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/lunr.min.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-lunr/search-lunr.js"></script>
        
    
        
        <script src="../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    

    </body>
</html>

